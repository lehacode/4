<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Task & Employee Manager</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    li { margin: 6px 0; }
    button { margin-left: 10px; }
    .done { text-decoration: line-through; color: gray; }
  </style>
</head>
<body>
  <h1>Task & Employee Manager</h1>

  <!-- Add Task -->
  <h2>Add Task</h2>
  <input type="text" id="taskInput" placeholder="Enter task"/>
  <button onclick="addTask()">Add Task</button>

  <!-- Task List -->
  <h3>Tasks</h3>
  <ul id="taskList"></ul>

  <!-- Add Employee -->
  <h2>Add Employee</h2>
  <input type="text" id="employeeName" placeholder="Employee name"/>
  <input type="text" id="employeeRole" placeholder="Employee role"/>
  <button onclick="addEmployee()">Add Employee</button>

  <!-- Employee List -->
  <h3>Employees</h3>
  <ul id="employeeList"></ul>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://task-manager-2025-ac725-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "task-manager-2025-ac725",
      storageBucket: "task-manager-2025-ac725.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ===== TASKS =====
    function addTask() {
      const taskInput = document.getElementById("taskInput");
      const task = { name: taskInput.value, done: false };
      if (task.name.trim() !== "") {
        database.ref("tasks").push(task);
        taskInput.value = "";
      }
    }

    function toggleTask(id, done) {
      database.ref("tasks/" + id).update({ done: !done });
    }

    function deleteTask(id) {
      database.ref("tasks/" + id).remove();
    }

    function renderTasks(tasks) {
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";
      for (let id in tasks) {
        const task = tasks[id];
        const li = document.createElement("li");
        li.className = task.done ? "done" : "";

        const span = document.createElement("span");
        span.innerText = task.name;

        const toggleBtn = document.createElement("button");
        toggleBtn.innerText = task.done ? "Undo" : "Done";
        toggleBtn.onclick = () => toggleTask(id, task.done);

        const delBtn = document.createElement("button");
        delBtn.innerText = "Delete";
        delBtn.onclick = () => deleteTask(id);

        li.appendChild(span);
        li.appendChild(toggleBtn);
        li.appendChild(delBtn);

        taskList.appendChild(li);
      }
    }

    database.ref("tasks").on("value", (snapshot) => {
      const tasks = snapshot.val() || {};
      renderTasks(tasks);
    });

    // ===== EMPLOYEES =====
    function addEmployee() {
      const nameInput = document.getElementById("employeeName");
      const roleInput = document.getElementById("employeeRole");
      const employee = { name: nameInput.value, role: roleInput.value };

      if (employee.name.trim() !== "" && employee.role.trim() !== "") {
        database.ref("employees").push(employee);
        nameInput.value = "";
        roleInput.value = "";
      }
    }

    function deleteEmployee(id) {
      database.ref("employees/" + id).remove();
    }

    function renderEmployees(employees) {
      const employeeList = document.getElementById("employeeList");
      employeeList.innerHTML = "";
      for (let id in employees) {
        const emp = employees[id];
        const li = document.createElement("li");
        li.innerText = `${emp.name} - ${emp.role}`;

        const delBtn = document.createElement("button");
        delBtn.innerText = "Delete";
        delBtn.onclick = () => deleteEmployee(id);

        li.appendChild(delBtn);
        employeeList.appendChild(li);
      }
    }

    database.ref("employees").on("value", (snapshot) => {
      const employees = snapshot.val() || {};
      renderEmployees(employees);
    });
  </script>
</body>
</html>
